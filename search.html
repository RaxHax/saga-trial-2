<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Search - AI-Powered Visual Discovery</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                    </svg>
                    Image Search
                </a>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-item active" data-view="search">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                    Search
                </div>
                <div class="nav-item" data-view="index">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" />
                    </svg>
                    Index Images
                </div>
            </nav>

            <div class="stats-box">
                <div class="stat-row">
                    <span class="stat-label">Total Images</span>
                    <span class="stat-value" id="total-images">0</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Device</span>
                    <span class="stat-value" id="device-info">-</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Status</span>
                    <span class="stat-value">
                        <span class="badge badge-success" id="status-badge">Ready</span>
                    </span>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="shortcuts">
                    <h4 class="shortcuts-title">Keyboard Shortcuts</h4>
                    <div class="shortcut-item">
                        <kbd>/</kbd> Focus search
                    </div>
                    <div class="shortcut-item">
                        <kbd>ESC</kbd> Close modal
                    </div>
                    <div class="shortcut-item">
                        <kbd>←</kbd><kbd>→</kbd> Navigate
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <button class="hamburger" aria-label="Toggle menu">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>
                </button>

                <div class="search-bar">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                    <input type="text" class="search-input" placeholder="Search your images..." autocomplete="off">
                </div>

                <button class="btn-icon" id="search-btn" aria-label="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                </button>
            </header>

            <!-- Content Area -->
            <div class="content">
                <!-- Search View -->
                <div id="search-view" class="view-content">
                    <!-- Filters -->
                    <div class="filter-bar">
                        <div class="filter-group">
                            <label class="filter-label">Results:</label>
                            <select class="dropdown-toggle" id="results-count">
                                <option value="12">12</option>
                                <option value="24">24</option>
                                <option value="48" selected>48</option>
                                <option value="96">96</option>
                                <option value="200">200</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Min Score:</label>
                            <select class="dropdown-toggle" id="min-score">
                                <option value="0">Any</option>
                                <option value="0.5">50%</option>
                                <option value="0.6">60%</option>
                                <option value="0.7">70%</option>
                                <option value="0.8">80%</option>
                            </select>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div class="results-section">
                        <div class="result-count mb-2"></div>

                        <!-- Loading State -->
                        <div class="loading-state hidden">
                            <div class="spinner"></div>
                            <p class="loading-text">Searching...</p>
                        </div>

                        <!-- Empty State -->
                        <div class="empty-state">
                            <div class="empty-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                                </svg>
                            </div>
                            <div class="empty-title">Ready to Search</div>
                            <div class="empty-description">Enter a natural language query to find images</div>
                        </div>

                        <!-- Results Grid -->
                        <div class="results-grid hidden"></div>
                    </div>
                </div>

                <!-- Index View -->
                <div id="index-view" class="view-content hidden">
                    <div class="card">
                        <h2>Index Images</h2>
                        <p class="text-muted mb-3">Process and add images to your searchable collection</p>

                        <form id="index-form">
                            <div class="form-group">
                                <label class="form-label" for="folder-path">Folder Path</label>
                                <input type="text" 
                                       class="form-input" 
                                       id="folder-path" 
                                       value="./scraped_images"
                                       placeholder="Enter folder path">
                                <div class="form-help">Path to folder containing images (.jpg, .jpeg, .png)</div>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-1m-4-8-4-4m0 0L8 8m4-4v12" />
                                </svg>
                                Start Indexing
                            </button>
                        </form>

                        <!-- Progress Container -->
                        <div class="progress-container hidden">
                            <h3>Indexing Progress</h3>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="progress-info">
                                <span class="progress-text">Initializing...</span>
                                <span class="progress-percent">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Image Modal -->
    <div class="modal">
        <button class="modal-close" aria-label="Close">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12" />
            </svg>
        </button>
        <div class="modal-container">
            <div class="modal-image-container">
                <img class="modal-image" src="" alt="">
            </div>
            <div class="modal-sidebar">
                <h3>Image Details</h3>
                <div class="modal-field">
                    <label>Filename</label>
                    <div id="modal-filename">-</div>
                </div>
                <div class="modal-field">
                    <label>Match Score</label>
                    <div id="modal-score">-</div>
                </div>
                <div class="modal-field">
                    <label>Description</label>
                    <div id="modal-description">-</div>
                </div>
                <div class="modal-actions mt-3">
                    <button class="btn btn-secondary" onclick="navigator.clipboard.writeText(document.querySelector('.modal-image').src)">
                        Copy URL
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container"></div>

    <!-- Additional Styles -->
    <style>
        .sidebar-footer {
            margin-top: auto;
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--gray-200);
        }

        .shortcuts {
            font-size: 0.75rem;
        }

        .shortcuts-title {
            font-weight: 600;
            text-transform: uppercase;
            color: var(--gray-500);
            margin-bottom: 0.5rem;
        }

        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
            color: var(--gray-600);
        }

        kbd {
            background: var(--gray-100);
            border: 1px solid var(--gray-300);
            border-radius: 0.25rem;
            padding: 0.125rem 0.375rem;
            font-size: 0.75rem;
            font-family: var(--font-mono);
        }

        .results-section {
            min-height: 400px;
        }

        .result-count {
            font-size: 0.875rem;
            color: var(--gray-600);
            font-weight: 500;
        }

        .text-muted {
            color: var(--gray-500);
        }

        .modal-field {
            margin-bottom: 1.5rem;
        }

        .modal-field label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--gray-500);
            margin-bottom: 0.5rem;
        }

        .modal-field div {
            font-size: 0.875rem;
            color: var(--gray-900);
        }

        .modal-actions {
            display: flex;
            gap: 0.5rem;
            flex-direction: column;
        }

        @keyframes slideOut {
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>

    <!-- JavaScript -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/ui.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
